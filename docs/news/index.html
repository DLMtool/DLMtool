<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • DLMtool Documentation</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Changelog" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DLMtool Documentation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../userguide/introduction.html">User Guide</a>
</li>
<li>
  <a href="../reference/index.html">Management Procedures</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      
    </div>

    <div id="dlmtool-5-3" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-3" class="anchor"></a>DLMtool 5.3</h2>
<div id="new-features" class="section level3">
<h3 class="hasAnchor">
<a href="#new-features" class="anchor"></a>New Features</h3>
<ul>
<li>The <code>runMSE</code> function is now more robust. MPs that fail (i.e. crash R) are now skipped without stopping the entire MSE. A warning message alerts users which MPs have been dropped from the analysis.</li>
<li>
<code><a href="../reference/runMSE.html">runMSE(Hist=TRUE)</a></code> returns a new S4 object of class ‘Hist’. This change means that information from historical simulations is now accessed using <code>@</code> instead of <code>$</code>. For example: <code>Hist &lt;- runMSE(Hist=TRUE)</code> <code>TS &lt;- Hist@TSdata # time-series data</code> <code>Data &lt;- Hist@Data # Data object from end of historical period</code>
</li>
<li>
<code><a href="../reference/runMSE.html">runMSE(Hist=TRUE)</a></code> now works with parallel processing</li>
<li>The <a href="https://dlmtool.github.io/DLMtool/cheat_sheets/CheatSheets.html">cheat sheets</a> have been updated. They can be accessed from within the R console using <code>cheatsheets</code>
</li>
<li>It is now possible to specify time-varying movement between areas using <code>OM@cpars$mov</code>.</li>
<li>
<code>Uses</code> function has been added to return MPs that use a particular data slot. For example: <code>Uses('AvC</code>)</li>
<li>Depletion for the initial year of the simulations can now be specified using <code>OM@cpars$initD</code>.</li>
<li>Real indices of abundance can be added to the Data object and used to condition OM. See <a href="https://dlmtool.github.io/DLMtool/userguide/using-real-indices.html">userguide</a> for details.</li>
<li>The calculations for unfished and MSY reference points have been standardized and are now fully described in the <a href="https://dlmtool.github.io/DLMtool/userguide/assumptions-of-dlmtool.html#calculating-reference-points.html">userguide</a>
</li>
<li>New functions <code>PMLimit</code> and <code>PMObj</code> have been added to generate interacive HTML tables showing the performance of MPs (using objects of class <code>PM</code>)</li>
<li>An argument <code>Labels</code> has been added to the <code>TradePlot</code> function and related functions (<code>Tplot</code> etc). This allows users to replace the default MP name with something more user-friendly. For example: <code><a href="../reference/TradePlot.html">TradePlot(MSE, Labels=list(AvC="Average Catch"))</a></code>. An argument <code>cols</code> has also been added so users have full control on the colors of the points and labels. The MP labels can be removed completely by setting the <code>lab.size</code> argument to <code>NULL</code>
</li>
</ul>
</div>
<div id="major-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#major-changes" class="anchor"></a>Major changes</h3>
<ul>
<li>The slots for specifying gradients in life-history parameters (e.g <code>Stock@Mgrad</code>, <code>Stock@Linfgrad</code>) have been removed. Time-varying parameters should now be specified with <code>OM@cpars</code>.</li>
<li>Biological reference points (SSB0, BMSY, FMSY, etc) are now calculated using a running average of the life-history and selectivity parameters over a period equal to the age of maturity for each simulation. See the <a href="https://dlmtool.github.io/DLMtool/userguide/assumptions-of-dlmtool.html#calculating-reference-points.html">userguide</a> for more information.</li>
<li>The <code>AnnualMSY</code> argument is now deprecated. MSY reference points are now always calculated in every time-step.</li>
<li>The <code>runMSErobust</code> function has been now removed from package (it was broken in the previous version).</li>
</ul>
</div>
<div id="fixes" class="section level3">
<h3 class="hasAnchor">
<a href="#fixes" class="anchor"></a>Fixes</h3>
<ul>
<li>fix issue with importing <code>Data</code> objects with larger number of length bins</li>
<li>fix issue where length-at-age was negative with high t0</li>
<li>allow custom area size for nareas &gt; 2 in cpars</li>
<li>fix issue with <code>curE75</code> which was ratcheting down effort</li>
<li>fix issue with effort calculation when both effort control and TAC are implemented</li>
<li>fix random seed in <code>Turing</code> function</li>
<li>speed up plots in <code>Turing</code> function</li>
<li>speed up plots in <code><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary(Data)</a></code>
</li>
<li>fix bug in CAL_nsamp and CAL_ESS when importing Obs object from CSV</li>
<li>fix typo in documentation for Itarget MPs</li>
</ul>
</div>
</div>
    <div id="dlmtool-5-2-3" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-2-3" class="anchor"></a>DLMtool 5.2.3</h2>
<div id="new-features-1" class="section level3">
<h3 class="hasAnchor">
<a href="#new-features-1" class="anchor"></a>New features</h3>
<ul>
<li>A two-page cheat-sheet has been developed for main DLMtool functions. Access the online version with <code><a href="../reference/cheatsheets.html">cheatsheets()</a></code>
</li>
<li>New function to provide bootstrapped samples of von Bertalanffy growth parameters directly to cpars (<code>Growth2OM</code>)</li>
<li>New function to estimate length-weight parameters from data (<code>LW2OM</code>).</li>
</ul>
</div>
<div id="minor-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#minor-changes" class="anchor"></a>Minor changes</h3>
<ul>
<li>update <code>plotMPA</code> to include relative size of areas</li>
</ul>
</div>
<div id="fixes-1" class="section level3">
<h3 class="hasAnchor">
<a href="#fixes-1" class="anchor"></a>Fixes</h3>
<ul>
<li>export built in MPs from MSEtool package to parallel cluster</li>
<li>fix issue with CAA at very low stocks sizes</li>
<li>fix issue with MSY calculations with Ricker SRR</li>
</ul>
</div>
</div>
    <div id="dlmtool-5-2-2" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-2-2" class="anchor"></a>DLMtool 5.2.2</h2>
<div id="fixes-2" class="section level3">
<h3 class="hasAnchor">
<a href="#fixes-2" class="anchor"></a>Fixes</h3>
<ul>
<li>fix issue with hyperstability/depletion for future projections</li>
<li>
<code>MSE@OM</code> has been updated to only include historical conditions.</li>
<li>Fix issue with <code>Converge</code> in 5.2.1</li>
<li>improvement to <code>XL2Data</code> to read files from other than working directory</li>
<li>more flexibility to <code><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary(Data)</a></code>
</li>
</ul>
</div>
</div>
    <div id="dlmtool-5-2-1" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-2-1" class="anchor"></a>DLMtool 5.2.1</h2>
<div id="minor-fixes" class="section level3">
<h3 class="hasAnchor">
<a href="#minor-fixes" class="anchor"></a>Minor fixes</h3>
<ul>
<li>Fix issues with <code>PM</code> functions when <code>MSE@nMPs == 1</code>
</li>
<li>Fix minor issue with cpp code to pass CRAN checks</li>
</ul>
</div>
</div>
    <div id="dlmtool-5-2" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-2" class="anchor"></a>DLMtool 5.2</h2>
<div id="new-features-2" class="section level3">
<h3 class="hasAnchor">
<a href="#new-features-2" class="anchor"></a>New Features</h3>
<ul>
<li>option for variable management interval by MP in <code>runMSE</code>. <code>OM@interval</code> can now be a vector of length <code>nMPs</code>, to specify different management intervals for different MPs. For example, with <code>OM@interval=c(1,5)</code> and <code>runMSE(OM, MPs=c('AvC', 'BK')),</code>AvC<code>is applied every year and</code>BK<code>is applied every 5 years.</code><a href="mailto:OM@interval">OM@interval</a>` is recycled if not the same length as number of MPs.</li>
</ul>
</div>
<div id="new-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New Functions</h3>
<ul>
<li>
<code>makeMeanMP</code> has been added to generate a MP that averages output from a list of other MPs.</li>
<li>
<code>Turing</code> has been added to compare simulated data from an OM to the real data in the fishery Data object.</li>
<li>
<code>LH2OM</code> and <code>predictLH</code> have been added to predict correlated life-history parameters from FishBase using FishLife model.</li>
</ul>
</div>
<div id="updated-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#updated-functions" class="anchor"></a>Updated Functions</h3>
<ul>
<li>improved convergence diagnostic with updated <code>Converge</code> function</li>
<li>
<code>Replace</code> function has been updated to replace directly from individual Stock, Fleet, Obs, and Imp objects instead of from only OM objects</li>
<li>The plots produced by <code><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary(Data)</a></code> function have been improved</li>
<li>
<code>makePerf</code> has been replaced with <code>tinyErr</code> function with options to remove process error, observation error, and gradients</li>
<li>additional MPs have been added: effort-based LBSPR and variants of existing MPAs</li>
<li>
<code>PM</code> (Performance Metric) methods have been updated and described in the user guide</li>
<li>MSE trade-off functions have been updated: <code>Trade_Plot</code>, <code>Tplot</code>, <code>Tplot2</code>, and <code>Tplot3</code>
</li>
<li>
<code>Fease</code> has been simplified and updated. Fease object has now been removed</li>
</ul>
</div>
<div id="improved-documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#improved-documentation" class="anchor"></a>Improved Documentation</h3>
<ul>
<li>similar functions and MPs have been combined into single help files</li>
<li>all MPs now have an argument <code>plot</code> and examples in the online documentation</li>
<li>documentation for MPs has been improved, including equations for calculations of TAC, TAE and size-limits</li>
<li>custom parameters (<code>OM@cpars</code>) have been updated and now have better documentation</li>
<li>the user guide <code><a href="../reference/userguide.html">userguide()</a></code> has been updated and additional chapters added on new features</li>
</ul>
</div>
<div id="minor-fixes-and-edits" class="section level3">
<h3 class="hasAnchor">
<a href="#minor-fixes-and-edits" class="anchor"></a>Minor Fixes and Edits</h3>
<ul>
<li>modified catch-at-length generation code to deal with dome-shaped selectivity better</li>
<li>fixed issue where OMs were not reproducible if some slots had no variability</li>
<li>new slots have been added to the <code>Data</code> object: <code>Common_Name</code>, <code>Species</code>, <code>Region</code>, and for data-rich MPs in MSEtool: <code>sigmaR</code> (recruitment error)</li>
<li>iSCAM and SS2DLM functions have been moved from DLMtool to MSEtool</li>
<li>added LHdatabase from FishLife and functions to predict life-history parameters</li>
</ul>
</div>
</div>
    <div id="dlmtool-5-1-3" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-1-3" class="anchor"></a>DLMtool 5.1.3</h2>
<ul>
<li>fix Replace function for new OM slots</li>
<li>fix indexing issue for size comps when there are only two size classes</li>
<li>fix indexing issue for spawning biomass &amp; MSY calcs for Ricker SRR in V5.1</li>
<li>automatically call <code><a href="../reference/setup.html">setup()</a></code> if <code>runsMSE(parallel=TRUE)</code> and cluster hasn’t been initialized</li>
<li>automatically export custom MPs to cluster if <code>runsMSE(parallel=TRUE)</code>
</li>
<li>fix index issue in <code>SPmod</code>
</li>
</ul>
</div>
    <div id="dlmtool-5-1-2" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-1-2" class="anchor"></a>DLMtool 5.1.2</h2>
<ul>
<li>Add contributors and more examples</li>
</ul>
</div>
    <div id="dlmtool-5-1-1" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-1-1" class="anchor"></a>DLMtool 5.1.1</h2>
<ul>
<li>Patch for indexing error in first projection year population dynamics.</li>
</ul>
</div>
    <div id="dlmtool-5-1" class="section level2">
<h2 class="hasAnchor">
<a href="#dlmtool-5-1" class="anchor"></a>DLMtool 5.1</h2>
<div id="operating-model" class="section level3">
<h3 class="hasAnchor">
<a href="#operating-model" class="anchor"></a>Operating Model</h3>
<ul>
<li><p>Mixed MPs: it is now possible to design MPs that combine Output and Input controls. Previously, MPs in DLMtool where either class ‘Input’ or class ‘Output’. This has changed, and all MPs are now class ‘MP’ and return a standard recommendation object (‘Rec’) that allows specification of any combination of catch limit, effort limit, spatial closure, and size-at-selection and/or size-at-retention regulations.</p></li>
<li><p>MP types: For convenience, MPs can be categorised into 4 types: ‘Output’ (only catch limits), ‘Input’ (only spatial, effort, and/or size regulations), ‘Mixed’ (some combination of Output and Input regulations), and ‘Reference’ (MPs such as FMSYref or NFref which are designed to be used a references and not for actual applications). The function <code>MPtype</code> can be used to determine an MP’s type, e.g <code><a href="../reference/MPtype.html">MPtype('AvC')</a></code>.</p></li>
<li><p>Increased flexibility of selectivity, retention, and discard mortality controls: MPs can now modify both selectivity and retention curves, and also modify the level of discard mortality.</p></li>
<li><p>Historical MPAs: A new slot <code>MPA</code> has been added to the <code>Fleet</code> object. This allows users to specify the historical year and the fraction of an area that was closed. See <code><a href="../reference/plotMPA.html">?plotMPA</a></code> for an example.</p></li>
<li><p>Improvements to MSY reference point calculations: MSY reference points are now calculate for every year. This accounts for changes in productivity (e.g., increases in growth) that affect reference points such as BMSY and FMSY.</p></li>
<li><p>Increased number of areas: By default DLMtool is a 2-area model. The code has now been updated to include more areas if required.</p></li>
<li><p>Movement by age: It is now possible to specify movement by age, such as ontogenetic migration offshore</p></li>
<li><p>Parallel processing: <code>runMSE</code> has been optimized for parallel processing. By default, parallel processing is not used if <code>nsim</code>&lt;=48. We suggest testing your OM with a low number of simulations (e.g <code>nsim</code>=48) and then increasing the number of simulations and using parallel processing: <code><a href="../reference/runMSE.html">runMSE(OM, MPs, parallel=TRUE)</a></code>. Update messages are not displayed in parallel mode.</p></li>
<li><p>Taxonomic information: New slots have been added to the <code>Stock</code> object to record common name and taxonomic details.</p></li>
</ul>
</div>
<div id="mp-performance" class="section level3">
<h3 class="hasAnchor">
<a href="#mp-performance" class="anchor"></a>MP Performance</h3>
<ul>
<li><p>The <code>Converge</code> function has been updated with a improved of convergence diagnostics.</p></li>
<li><p>A new performance metric (<code>PM</code>) class has been added. This allows users to develop a custom set of performance metrics for their management system. A series of example <code>PM</code> objects have been created (see <code><a href="../reference/avail.html">avail('PM')</a></code>). Over time the summary and plotting functions will be updated to take a set of <code>PM</code> objects. See <code>Tplot3</code> for an example.</p></li>
</ul>
</div>
<div id="robustness-and-testing" class="section level3">
<h3 class="hasAnchor">
<a href="#robustness-and-testing" class="anchor"></a>Robustness and Testing</h3>
<ul>
<li><p>Many improvements to functions (e.g MPs) to improve robustness and avoid model crashes due to stochastic sampling of parameters.</p></li>
<li><p>All code in DLMtool is now tested using the <code>testthat</code> package to ensure that the functions work as expected. Please continue to file bug reports at: <a href="https://github.com/DLMtool/DLMtool/issues" class="uri">https://github.com/DLMtool/DLMtool/issues</a></p></li>
</ul>
</div>
<div id="documentation" class="section level3">
<h3 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h3>
<ul>
<li><p>The User Manual has been completely revised and updated. Use <code><a href="../reference/userguide.html">userguide()</a></code> to access. Please submit any typo corrections or suggestions for improvement at <a href="https://github.com/DLMtool/DLMtool_UserGuide/issues" class="uri">https://github.com/DLMtool/DLMtool_UserGuide/issues</a>. Pull requests are welcome.</p></li>
<li><p>We are developing an online library of DLMtool OMs (<a href="http://www.datalimitedtoolkit.org/fishery_library" class="uri">http://www.datalimitedtoolkit.org/fishery_library</a>) which has the OM Report, OM Excel file, and OM R data object for each DLMtool OM. A standardized MSE report is in development. The OM library will be expanded as new OMs are developed. Please contact us if you have developed OMs and are able to make them publicly available.</p></li>
<li><p>A DLMtool user forum is in development and will be launched soon. The idea of the forum is to provide a platform for DLMtool users to ask questions and share experience with each other and the DLMtool team.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#dlmtool-5-3">5.3</a></li>
        <li><a href="#dlmtool-5-2-3">5.2.3</a></li>
        <li><a href="#dlmtool-5-2-2">5.2.2</a></li>
        <li><a href="#dlmtool-5-2-1">5.2.1</a></li>
        <li><a href="#dlmtool-5-2">5.2</a></li>
        <li><a href="#dlmtool-5-1-3">5.1.3</a></li>
        <li><a href="#dlmtool-5-1-2">5.1.2</a></li>
        <li><a href="#dlmtool-5-1-1">5.1.1</a></li>
        <li><a href="#dlmtool-5-1">5.1</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="copyright">
  <p>Developed by Tom Carruthers, Adrian Hordyk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

